# Bitrix Simple Vue Extension

Простой пример использования компонента Vue.js из ядра 1С-Битрикс через расширения (Extension).

Мне показалось в документации не хватает наглядного примера использования и описания последовательности действий.

Попробую исправить эту ситуацию.

# UPD:
У Битрикс вышел полный курс по Vue.js - https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=176&INDEX=Y

## Установка @bitrix/cli

Для начала необходимо установить @bitrix/cli если он еще не установлен.

```
npm install -g @bitrix/cli
Или
yarn global add @bitrix/cli
```

После установки мы сможем запускать тесты и собирать наши расширения.

[Подробнее о @bitrix/cli](#bitrixcli)

## Создание расширения

Для примера можно взять файлы из текущего репозитория и перейти сразу к сборке расширений.

Структуру расширения можно создать, выполнив команду:

```
bitrix create
```

Далее опишу некоторые нюансы:

## Путь до ваших расширений

Расширения вашего проекта должны находится в папке /local/js/

Если коротко, то полный путь должен выглядеть примерно так - /local/js/modulename/vue/components/extensionname/

Внутри /local/js/ можно организовать структуру какую вам угодно.

Главное не использовать в названиях разделов и файлов точки.

Иначе ваше расширение просто не подключится т.к. Битрикс его просто не сможет найти.

## Структура расширения
```
 extensionname
    src — исходные файлы
    dist — бандлы для браузера
    bundle.config.js — конфигурационный файл для сборщика
    config.php — конфигурационный файл экстеншна
    lang — локализации
    test — тесты
    @types — файлы *.d.ts
```
Обязательные элементы: src, dist, bundle.config.js, config.php.

[Подробнее о расширениях в Битрикс](#bitrixextension)

## Сборка расширения

После чего мы можем запустить сборку нашего расширения
```
bitrix build
```
Сборщик рекурсивно найдет все файлы bundle.config.js и выполнит для каждого конфига сборку и транспиляцию.

Так же можно запускать сборку непосредственно из папки с расширением.

## Подключение расширения в шаблоне сайта

Для начала подключим расширение:
``` PHP
\Bitrix\Main\UI\Extension::load('modulename.vue.components.extensionname');
```

Подключаем либо в header.php, если функционал необходим на всех страницах сайта, либо в конкретных шаблонах компонента.

Далее вызываем наше расширение.

Если расширение используем в шаблоне компонента тогда вызов делаем в нем (component_epilog.php, template.php, script.js)

Если расширение используем на всех страницах шаблона сайта и подключили его в header.php тогда вызов делаем либо в header.php,
либо в отдельном файле где содержится JavaScript код.
``` JS
BX.Vue.create({
    el: '#bx-extensionname',
    template: '<bx-extensionname/>'
});
```

Не забываем в нужном месте HTML-разметки прописать элемент в который
отобразится результат работы расширения
``` HTML
<div id="bx-extensionname"></div>
```

Таким образом можно реализовывать расширения не только на Vue.js,
для примера можно ознакомится с [расширениями модуля UI](#bitrixuimodule) который поставляется
из коробки.

## Ссылки на документацию
### Vue.js Битрикс
https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&CHAPTER_ID=011881
### Extension Битрикс <a name="bitrixextension"></a>
https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=11981
### @bitrix/cli <a name="bitrixcli"></a>
https://dev.1c-bitrix.ru/learning/course/index.php?COURSE_ID=43&LESSON_ID=12435&LESSON_PATH=3913.3516.4776.3635.12435
### Готовые расширения модуля UI <a name="bitrixuimodule"></a>
https://dev.1c-bitrix.ru/api_d7/bitrix/ui/index.php
